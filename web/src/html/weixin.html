<!doctype html>
<html>
<head>
<meta charset="utf-8">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta content="yes" name="apple-mobile-web-app-capable" />
<meta content="black" name="apple-mobile-web-app-status-bar-style" />
<meta content="telephone=no" name="format-detection" />
<title>农发贷送您50元礼品券</title>
<style>
html, body {
	margin: 0;
	padding: 0;
	height: 100%;
	font-family: "Helvetica Neue", Helvetica, STHeiTi, "Roboto Regular", Roboto, "Droid Sans", "Microsoft Yahei", sans-serif;
}
.user_ico_div {
	text-align: center;
	margin-top: 24px;
}
.user_ico {
	border-radius: 50px;
	margin: 0 auto;
}
.username {
	text-align: center;
}
.content {
	margin-top: 16px;
	text-align: center;
}
.btn {
	text-align: center;
	width: 80%;
	line-height: 36px;
	border-radius: 5px;
	background-color: #28a8ff;
	color: #fff;
	margin: 0 auto;
	margin-top: 24px;
}
</style>
</head>

<body>
<div>
  <div class="user_ico_div"><img class="user_ico" src="http://wx.qlogo.cn/mmopen/XibOOqwB6cOOK7RfQzVkNEW75Kt9Tlia7cjgWuE1oJbiaT3SzR6cFq99UkJQUDVZR5R3AG3xyzStcyfrEZT1IavKLeeBkDdXuP5/0" width="100"></div>
  <div class="username">刘东杰</div>
  <div class="content">农发贷送您50元礼品券红包</div>
  <div id="btn_bonus" class="btn">点击领取</div>
</div>
<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>
<script>
	var g_data = [{
		title: "《港囧》贴心派送大额利是，让你赴港购物不再囧。",
		abstract: "在成交额超过2亿之际，农发贷携手《港囧》贴心派送_____元，让你赴港购物不再囧。"
	}, {
		title: "《失孤》给影迷赠送贴心利是，为美好生活助力加油！",
		abstract: "在成交额超过2亿之际，农发贷携手《失孤》给影迷赠送贴心利是，为美好生活助力加油！"
	}, {
		title: "《速度与激情7》给小伙伴们派利是了，愿你是速度与激情的化身！",
		abstract: "在成交额超过2亿之际，农发贷携手《速度与激情》给小伙伴们派利是了，愿你是速度与激情的化身！"
	}, {
		title: "《王牌特工》派王牌利是，你就是王牌！",
		abstract: "在成交额超过2亿之际，农发贷携手《王牌特工》派王牌利是，你就是王牌！"
	}, {
		title: "《西游记之孙悟空三打白骨精》派大圣给孩儿们派利是啦，快抢啊！！",
		abstract: "在成交额超过2亿之际，农发贷携手《西游记之孙悟空三打白骨精》派大圣给孩儿们派利是啦，快抢啊！！！"
	}, {
		title: "《星球大战7：原力觉醒》的利是，抢到，你就是王者",
		abstract: "在成交额超过2亿之际，农发贷携手《星球大战7：原力觉醒》给小伙伴们派利是，抢到，你就是王者！"
	}, {
		title: "《咱们结婚吧》给小伙伴们派结婚利是，愿有情人终成眷属！",
		abstract: "农发贷成交额突破2亿啦，在此携手鸳鸯配给小伙伴们派结婚利是，愿有情人终成眷属！"
	}, {
		title: "《战狼》给你派利是，愿你2015年越战越勇！",
		abstract: "在成交额超过2亿之际，农发贷携手《战狼》给你派利是，愿你2015年越战越勇！"
	}, {
		title: "《侏罗纪世界》从远古送来的利是，你肯定想要！",
		abstract: "在成交额超过2亿之际，农发贷携手《侏罗纪世界》从远古送来的利是，你肯定想要！"
	}];
	var g_urls = ["http://a2.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/FRya2C1ILArwvRxcBkQROGm4LkICT0jzudOidg7SCxM!/m/dAkAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18", /*港囧*/
		"http://a3.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/pF48seHnCpr5KqbVcwVvhr44rGGQfyHiupQXcsH1qGU!/m/dAoAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18", /*失孤*/
		"http://a4.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/eNYOKqWLco7JSeUYiBSfOMtSBevS8ENF.hISzC8mHPU!/m/dFMAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18",/*速度与激情7*/
		"http://a3.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/uhVnytb6MK2sZOA3M5Dz6lUa7VR4n*xJmaCRLNRLF7o!/m/dAoAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18",/*王牌特工*/
		"http://a3.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/FwWkqe.C4xj4rrrHuwEV65osk3ONCBFmshunoVXyrWE!/m/dAoAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18", /*西游记之孙悟空三打白骨精*/
		"http://a4.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/V4R2.c4ZeiOR6HoUBbk141eCJ3FcgQ5HBf7WTlghKSI!/m/dAMAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18", /*星球大战7：原力觉醒*/
		//"http://a2.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/iJtL6ZP5hP8SKjzzlTbx7RfRAjFBj1sR8XMzp16b4jo!/m/dAkAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18", /*咱们结婚吧*/
		"http://a3.qpic.cn/psb?/V10c5w0u04dUDy/zSa9Y*22lSEqcbxrydGfUhBImUshkxxl9DQIlvrFdYg!/m/dGoAAAAAAAAAnull&bo=PAA8AAAAAAAFByQ!&rf=photolist&t=5",/*咱们结婚吧*/
		"http://a1.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/v1EFdX5dxN9uenK8rvJPE2jlm5qExxstOevo9MSGrTg!/m/dFQAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18", /*战狼*/
		"http://a1.qpic.cn/psb?/19a0e58d-2fd7-40d3-861d-bccfaf5c9ba2/pNfYymrg9kSDSXnAqqtoIVXfU0ciO8xqvYSEm2k33Fc!/m/dAgAAAAAAAAA&ek=1&kp=1&pt=0&bo=PAA8AAAAAAAFByQ!&t=5&sce=0-12-12&rf=0-18" /*侏罗纪世界*/
	];


	wx.config({
		debug: true, // 开启调试模式,调用的所有api的返回值会在客户端alert出来，若要查看传入的参数，可以在pc端打开，参数信息会通过log打出，仅在pc端时才会打印。
		appId: 'wx4b6e962611f5e662', // 必填，公众号的唯一标识
		timestamp: '1433204183', // 必填，生成签名的时间戳
		nonceStr: 'randomstr123QQ', // 必填，生成签名的随机串
		signature: '8f3fa3a1994b2df4e163b7aaa475a9f3aa42dce8',// 必填，签名，见附录1
		jsApiList: ["openCard","onMenuShareAppMessage", "onMenuShareTimeline","hideMenuItems","onMenuShareQQ","onMenuShareWeibo"] // 必填，需要使用的JS接口列表，所有JS接口列表见附录2
	});
	
	function bindWeixinEvent() {//确保分享出去的是领红包的页面，而且要加上加密字段，确保关系链
		//alert("绑定微信分享事件:");
		g_stage=6;
		
		var shareURL="https://open.weixin.qq.com/connect/oauth2/authorize?appid=wx4b6e962611f5e662&redirect_uri=http%3A%2F%2Fwww.51blb.com%2Fhandler%2Fweixin%2Fbonus.html&response_type=code&scope=snsapi_userinfo&state=STATE&connect_redirect=1#wechat_redirect";
		window.g_url = shareURL;
		if (typeof(g_stage) == "undefined") {
			g_stage = 0;
		}
		var title = g_data[g_stage].title;
		var des = g_data[g_stage].abstract;
		var imgUrl = g_urls[g_stage];
		var linkUrl = shareURL;
		
		wx.onMenuShareTimeline({
			title: title + des, // 分享标题
			link: linkUrl, // 分享链接
			imgUrl: imgUrl, // 分享图标
			success: function() {
				// 用户确认分享后执行的回调函数
				//alert("分享成功");
			},
			cancel: function() {
				// 用户取消分享后执行的回调函数
			}
		});
					
		wx.onMenuShareAppMessage({
			title: title, // 分享标题
			desc: des, // 分享描述
			link: linkUrl, // 分享链接
			imgUrl: imgUrl, // 分享图标
			type: '', // 分享类型,music、video或link，不填默认为link
			dataUrl: '', // 如果type是music或video，则要提供数据链接，默认为空
			success: function() {
				// 用户确认分享后执行的回调函数
				//alert("分享成功");
			},
			cancel: function() {
				// 用户取消分享后执行的回调函数
			}
		});

		wx.onMenuShareQQ({
			title: title, // 分享标题
			desc: des, // 分享描述
			link: linkUrl, // 分享链接
			imgUrl: imgUrl, // 分享图标
			success: function () { 
			   // 用户确认分享后执行的回调函数
			},
			cancel: function () { 
			   // 用户取消分享后执行的回调函数
			}
		});
		
		wx.onMenuShareWeibo({
			title: title, // 分享标题
			desc: des, // 分享描述
			link: linkUrl, // 分享链接
			imgUrl: imgUrl, // 分享图标
			success: function () { 
			   // 用户确认分享后执行的回调函数
			},
			cancel: function () { 
				// 用户取消分享后执行的回调函数
			}
		});
		//alert("bindWeixinEvent succ");
	}
	
	function openWXCard(){
		wx.openCard({
			cardList: [{
				cardId: 'po2HJszYamo5Vqz5cR5xMQ-XtP7s',
				code: ''
			}]// 需要打开的卡券列表
			,success:function(res){
				alert(JSON.stringify(res));
			}
		});

	}
	
	function addWXCard(){
		var cardExt={
				timestamp:"1433151416",
				signature:"df93a946d51918414db58b1b16b50d6b1a8c93ed"
			};
		wx.addCard({
			cardList: [{
				cardId: 'po2HJszYamo5Vqz5cR5xMQ-XtP7s',
				cardExt: JSON.stringify(cardExt)
			}], // 需要添加的卡券列表
			success: function (res) {
				var cardList = res.cardList; // 添加的卡券列表信息
				alert(res);
			}
		});

	}
	
	function checkAPI(){/*检查接口是否存在*/
		
		
		wx.checkJsApi({
			jsApiList: ['openCard'], // 需要检测的JS接口列表，所有JS接口列表见附录2,
			success: function(res) {
				var str=JSON.stringify(res);
				alert(str);
				// 以键值对的形式返回，可用的api值true，不可用为false
				// 如：{"checkResult":{"chooseImage":true},"errMsg":"checkJsApi:ok"}
			}
		});
	}
	
	
	wx.ready(function() {
		checkAPI();
		//openWXCard();
		addWXCard();
		
		//bindWeixinEvent();

			//wx.hideMenuItems({
//				menuList: [
//						"menuItem:share:qq",
//						"menuItem:share:QZone",
//						"menuItem:share:weiboApp",
//						"menuItem:copyUrl",
//						"menuItem:jsDebug",
//						"menuItem:editTag",
//						"menuItem:delete",
//						"menuItem:originPage",
//						"menuItem:readMode",
//						"menuItem:openWithQQBrowser",
//						"menuItem:openWithSafari",
//						"menuItem:share:email",
//						"menuItem:share:brand",
//						"menuItem:favorite"
//					] // 要隐藏的菜单项，只能隐藏“传播类”和“保护类”按钮，所有menu项见附录3
//			});

			//alert("微信接口调用成功");
		});
	wx.error(function(res) {
		alert("error" + res);
	});

	window.onerror=function(){
		alert("window onerror"+arguments);
	}

	

	
	//$("#btn_bonus").on("click",function(){
		//});
</script>
</body>
</html>
